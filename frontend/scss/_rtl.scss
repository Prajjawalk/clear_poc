@use "variables" as *;

// ============================================================================
// RTL (RIGHT-TO-LEFT) SUPPORT FOR ARABIC LANGUAGE
// ============================================================================

// RTL Support for Arabic language
[dir="rtl"] {
    .nrc-header {
        .navbar {
            // Fix navbar layout for RTL
            .container-fluid {
                // Fix main header container
                > .d-flex.align-items-center.justify-content-between {
                    flex-direction: row-reverse;
                }
            }

            // Fix navbar brand alignment for RTL
            .navbar-brand {
                flex-direction: row-reverse; // In RTL, we want text-logo order

                // Fix margins for RTL layout
                .nrc-brand-text {
                    &.me-3 {
                        margin-right: 0 !important;
                        margin-left: 1rem !important;
                    }
                }

                .nrc-logo-desktop, .nrc-logo-mobile {
                    &.me-2, &.me-3 {
                        margin-right: 0 !important;
                        margin-left: 0 !important; // Remove extra margins
                    }
                }
            }

            // Fix collapsible content for RTL
            .navbar-collapse {
                // Navigation items
                .navbar-nav {
                    &.me-auto {
                        margin-right: auto !important;
                        margin-left: 0 !important;
                    }

                    // Fix dropdown items
                    .nav-link {
                        text-align: right;

                        i {
                            &.me-1 {
                                margin-right: 0 !important;
                                margin-left: 0.25rem !important;
                            }
                        }
                    }
                }

                // Fix right side items container
                .header-end-items {
                    flex-direction: row-reverse;
                    gap: 0.75rem !important;
                    flex-wrap: nowrap; // Prevent wrapping

                    // Fix individual items
                    .badge {
                        order: 3; // Sudan badge first in RTL
                        flex-shrink: 0;
                    }

                    .d-none.d-md-inline {
                        order: 2; // Subtitle second
                        white-space: nowrap !important;
                        flex-shrink: 0;
                    }

                    .language-switcher {
                        order: 1; // Language switcher
                        flex-shrink: 0;
                    }

                    .dropdown {
                        order: 0; // User dropdown last (leftmost in RTL)
                        flex-shrink: 0;
                    }

                    .btn {
                        order: 0; // Login button last
                        flex-shrink: 0;
                    }
                }
            }
        }

        // Legacy fallback for old styles
        .d-flex {
            flex-direction: row-reverse;

            .nrc-logo {
                margin-right: 0;
                margin-left: 1rem;
            }
        }
    }

    .sidebar {
        border-right: none;
        border-left: 1px solid $sidebar-border;
        box-shadow: -2px 0 4px rgba($nrc-black, 0.05);
        direction: rtl;
        text-align: right;

        .nav-pills .nav-link {
            text-align: right;
            direction: rtl;
            padding-right: 1rem;
            padding-left: 1rem;

            i {
                margin-right: 0;
                margin-left: 0.5rem;
                float: right;
            }
        }

        // Fix collapsible sections for RTL
        .collapse-toggle {
            float: left;
            transform: rotate(180deg);
        }

        .nav-item {
            direction: rtl;
        }

        // Fix sidebar folding for RTL
        &.collapsed {
            .nav-link {
                text-align: center;

                i {
                    margin: 0 auto;
                    float: none;
                }

                span {
                    display: none;
                }
            }
        }
    }

    .btn {
        i {
            &.me-1, &.me-2 {
                margin-right: 0;
                margin-left: 0.25rem;
            }
        }
    }

    // Fix breadcrumbs for RTL
    .breadcrumb {
        direction: rtl;
        text-align: right;

        .breadcrumb-item {
            float: right;

            &::before {
                content: "\\";
                transform: scaleX(-1);
                margin: 0 0.5rem;
            }

            &:first-child::before {
                content: none;
            }

            a {
                direction: rtl;
            }
        }
    }
}
