{% extends "layout.html" %}
{% load i18n %}

{% block title %}{% trans "NRC EWAS - User Management" %}{% endblock %}
{% block description %}Norwegian Refugee Council EWAS Sudan - User Management{% endblock %}
{% block header_subtitle %}{% trans "User Management" %}{% endblock %}
{% block app_class %}app-users{% endblock %}

{% block sidebar_icon %}bi bi-people{% endblock %}
{% block sidebar_color %}success{% endblock %}
{% block sidebar_heading %}{% trans "User Management" %}{% endblock %}

{% block mobile_sidebar_icon %}bi bi-people{% endblock %}
{% block mobile_sidebar_color %}success{% endblock %}
{% block mobile_sidebar_heading %}{% trans "User Management" %}{% endblock %}

{% block sidebar_nav %}
<ul class="nav nav-pills flex-column">
    <li class="nav-item mb-1">
        <a class="nav-link {% if request.resolver_match.url_name == 'profile' %}active{% endif %}"
           href="{% url 'users:profile' %}" title="{% trans 'My Profile' %}">
            <i class="bi bi-person-circle"></i>
            <span class="nav-text ms-2">{% trans "My Profile" %}</span>
        </a>
    </li>
    <li class="nav-item mb-1">
        <a class="nav-link {% if request.resolver_match.url_name == 'notification_preferences' %}active{% endif %}"
           href="{% url 'users:notification_preferences' %}" title="{% trans 'Notifications' %}">
            <i class="bi bi-bell"></i>
            <span class="nav-text ms-2">{% trans "Notifications" %}</span>
        </a>
    </li>
    <li class="nav-item mb-1">
        <a class="nav-link {% if request.resolver_match.url_name == 'change_password' %}active{% endif %}"
           href="{% url 'users:change_password' %}" title="{% trans 'Change Password' %}">
            <i class="bi bi-key"></i>
            <span class="nav-text ms-2">{% trans "Change Password" %}</span>
        </a>
    </li>
    {% if user.is_staff %}
    <li class="nav-item mb-1">
        <hr class="my-2">
        <h6 class="nav-header text-muted small">{% trans "Administration" %}</h6>
    </li>
    <li class="nav-item mb-1">
        <a class="nav-link {% if request.resolver_match.url_name == 'admin_dashboard' %}active{% endif %}"
           href="{% url 'users:admin_dashboard' %}" title="{% trans 'Admin Dashboard' %}">
            <i class="bi bi-speedometer2"></i>
            <span class="nav-text ms-2">{% trans "Dashboard" %}</span>
        </a>
    </li>
    <li class="nav-item mb-1">
        <a class="nav-link {% if request.resolver_match.url_name == 'admin_user_list' %}active{% endif %}"
           href="{% url 'users:admin_user_list' %}" title="{% trans 'Manage Users' %}">
            <i class="bi bi-people"></i>
            <span class="nav-text ms-2">{% trans "Manage Users" %}</span>
        </a>
    </li>
    {% endif %}
</ul>
{% endblock %}

{% block mobile_sidebar_nav %}
<ul class="nav nav-pills flex-column">
    <li class="nav-item mb-1">
        <a class="nav-link {% if request.resolver_match.url_name == 'profile' %}active{% endif %}"
           href="{% url 'users:profile' %}">
            <i class="bi bi-person-circle me-2"></i>
            {% trans "My Profile" %}
        </a>
    </li>
    <li class="nav-item mb-1">
        <a class="nav-link {% if request.resolver_match.url_name == 'notification_preferences' %}active{% endif %}"
           href="{% url 'users:notification_preferences' %}">
            <i class="bi bi-bell me-2"></i>
            {% trans "Notifications" %}
        </a>
    </li>
    <li class="nav-item mb-1">
        <a class="nav-link {% if request.resolver_match.url_name == 'change_password' %}active{% endif %}"
           href="{% url 'users:change_password' %}">
            <i class="bi bi-key me-2"></i>
            {% trans "Change Password" %}
        </a>
    </li>
    {% if user.is_staff %}
    <li class="nav-item mb-1">
        <hr class="my-2">
        <h6 class="nav-header text-muted small">{% trans "Administration" %}</h6>
    </li>
    <li class="nav-item mb-1">
        <a class="nav-link {% if request.resolver_match.url_name == 'admin_dashboard' %}active{% endif %}"
           href="{% url 'users:admin_dashboard' %}">
            <i class="bi bi-speedometer2 me-2"></i>
            {% trans "Dashboard" %}
        </a>
    </li>
    <li class="nav-item mb-1">
        <a class="nav-link {% if request.resolver_match.url_name == 'admin_user_list' %}active{% endif %}"
           href="{% url 'users:admin_user_list' %}">
            <i class="bi bi-people me-2"></i>
            {% trans "Manage Users" %}
        </a>
    </li>
    {% endif %}
</ul>
{% endblock %}

{% block sidebar_actions %}
<hr class="my-3">

<h6 class="sidebar-heading nrc-heading mb-3">
    <i class="bi bi-lightning me-2 text-warning"></i>
    <span class="sidebar-text">{% trans "Quick Actions" %}</span>
</h6>
<div class="d-grid gap-2">
    <a href="{% url 'users:profile_edit' %}" class="btn btn-outline-success btn-sm" title="{% trans 'Edit Profile' %}">
        <i class="bi bi-pencil"></i><span class="nav-text ms-1">{% trans "Edit Profile" %}</span>
    </a>
    {% if user.is_staff %}
    <a href="{% url 'users:admin_user_create' %}" class="btn btn-outline-primary btn-sm" title="{% trans 'New User' %}">
        <i class="bi bi-plus"></i><span class="nav-text ms-1">{% trans "New User" %}</span>
    </a>
    {% endif %}
</div>
{% endblock %}

{% block mobile_sidebar_actions %}
<hr class="my-3">

<h6 class="sidebar-heading nrc-heading mb-3">
    <i class="bi bi-lightning me-2 text-warning"></i>
    {% trans "Quick Actions" %}
</h6>
<div class="d-grid gap-2">
    <a href="{% url 'users:profile_edit' %}" class="btn btn-outline-success btn-sm">
        <i class="bi bi-pencil me-1"></i>{% trans "Edit Profile" %}
    </a>
    {% if user.is_staff %}
    <a href="{% url 'users:admin_user_create' %}" class="btn btn-outline-primary btn-sm">
        <i class="bi bi-plus me-1"></i>{% trans "New User" %}
    </a>
    {% endif %}
</div>
{% endblock %}